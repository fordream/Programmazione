%!PS
/printchar {		% stack: (string) index => ...
		get 1 string dup
		3 2 roll 0 exch
		put show
	} def

/getchar {		% stack: (string) index => (c)
		get 1 string dup % ccode /(.) /(.)
		3 2 roll 0 exch % /(.) /(.) 0 ccode
		put
	} def

/inc {		% stack: /ref => ...
	dup load 1 add def } def

/pagewidth 200 def
/leftpagemargin 36 def
/rightpagemargin 36 def

/newline { currentpoint 18 sub exch pop leftpagemargin exch moveto } def

/PrintWithSpacing {		% stack: (string) spacewidth => ...
		/spacewidth exch def
		/textstring exch def
		{ pop ( ) 0 get eq 
			{ spacewidth ( ) stringwidth pop sub 0 rmoveto } % Se è uno spazio andiamo avanti del quantitativo di posto richiesto
			if
		} textstring kshow
	} def

/PrintText {		% stack: (string) => ...
		/textstring exch def
		/lastspace 0 def
		/lastwidth 0 def
		/curwidth 0 def
		/from 0 def
		/spacecount 0 def
		/maxwidth pagewidth leftpagemargin rightpagemargin add sub def
		
		0 1 textstring length 1 sub {
			/thischarindex exch def
			textstring thischarindex getchar ( ) eq
				{ curwidth 0 eq		% Se è uno spazio
					{ /lastspace thischarindex def		% non abbiamo mai trovato qualcosa da stampare
					/from thischarindex 1 add def }
					{ /lastspace thischarindex def		% c'erano già delle lettere
					/lastwidth curwidth def
					/spacecount inc
					/curwidth curwidth ( ) stringwidth pop add def }
					ifelse
				}
				{ curwidth textstring thischarindex getchar stringwidth pop add maxwidth gt	% Se aggiungendolo si supera la riga
					{ from lastspace gt	
						{ textstring from thischarindex 1 sub from sub getinterval show newline		% cioè non abbiamo neanche una parola sulla riga
						}
						{ textstring from lastspace 1 sub from sub getinterval /toprint exch def	% Abbiamo almeno una parola sulla riga, stampiamo fino a quella con gli spazi a diversa spaziatura
						toprint maxwidth lastwidth sub spacecount div PrintWithSpacing	} 
							ifelse
						/from thischarindex def /curwidth 0 def /lastwidth 0 def /spacecount 0 def	% Settiamo le cose per la prossima riga
					}
					{	% Se non si supera la riga
						/curwidth curwidth textstring thischarindex getchar stringwidth pop add def	% Aggiungiamo la lunghezza del carattere e continuiamo
					}
					ifelse
				}
				ifelse
		} for
	} def

/Times-Roman findfont 15 scalefont setfont
newpath
72 100 moveto
(vorrei stampare tutto questo ma forse è un po' troppo lungo da poter stampare tutto in una riga, speriamo infatti che venga spezzato nel modo giusto, altrimenti è un problema serio da risolvere e non saprei come fare siccome il testo è incasinatissimo. Supercalifragilistichespiralidosotasigaygliamicidibelliardohannounpodiritardopieropuzzahochpureecaberlettieuncojonemarinoedaccordo.) PrintText

(Loltipo cosa non è possibile che succeda) 32 PrintWithSpace

showpage
